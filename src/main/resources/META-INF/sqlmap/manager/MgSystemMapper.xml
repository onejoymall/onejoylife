<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mall.MgSystemMapper">

  <insert id="insertSystemDelivery" parameterType="com.webapp.manager.vo.MgDeliveryVO">
      insert into store_delivery
      (
        store_id,
        product_delivery_class,
        product_delivery_type,
        product_delivery_International_type,
        product_delivery_locale,
        product_delivery_payment_type,
        product_delivery_date,
        product_delivery_payment_class,
        product_delivery_payment,
        product_delivery_store_pickup
      )
      values
      (
        #{store_id},
        #{product_delivery_class},
        #{product_delivery_type},
        #{product_delivery_International_type},
        #{product_delivery_locale},
        #{product_delivery_payment_type},
        #{product_delivery_date},
        #{product_delivery_payment_class},
        #{product_delivery_payment},
        #{product_delivery_store_pickup}
      )
      on duplicate KEY update
        store_id=#{store_id},
        product_delivery_class=#{product_delivery_class},
        product_delivery_type=#{product_delivery_type},
        product_delivery_International_type=#{product_delivery_International_type},
        product_delivery_locale=#{product_delivery_locale},
        product_delivery_payment_type=#{product_delivery_payment_type},
        product_delivery_date=#{product_delivery_date},
        product_delivery_payment_class=#{product_delivery_payment_class},
        product_delivery_payment=#{product_delivery_payment},
        product_delivery_store_pickup=#{product_delivery_store_pickup}
    </insert>

    <select id="getSystemDelivery" parameterType="com.webapp.manager.vo.MgDeliveryVO" resultType="java.util.Map">
        select * from store_delivery where store_id = #{store_id}
    </select>
  <select id="getProductCodeList" parameterType="com.webapp.manager.vo.MgProductCodeVO" resultType="java.util.Map">
    select
    *,(select code_name from code where code.code='product_class_code' and code_value=product_class_code.product_class_code_type) product_class_code_type_name
    from product_class_code where 1=1
    <if test="product_class_code_type != null and product_class_code_type !=''"> and product_class_code_type =#{product_class_code_type}</if>
    <if test="product_class_name != null and product_class_name !=''"> and product_class_name =#{product_class_name}</if>
    order by reg_date desc
  </select>
  <insert id="insertProductCode" parameterType="com.webapp.manager.vo.MgProductCodeVO">
    insert into product_class_code
    (
      product_class_code_type,
      product_class_code,
      product_class_name,
      product_class_use_yn
    )values(
      #{product_class_code_type},
      #{product_class_code},
      #{product_class_name},
      #{product_class_use_yn}
    )
    on duplicate KEY update
    product_class_code_type=#{product_class_code_type},
    product_class_code=#{product_class_code},
    product_class_name=#{product_class_name},
    product_class_use_yn=#{product_class_use_yn}

  </insert>
</mapper>
