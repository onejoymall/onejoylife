<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="mall.DeliveryMapper">
    <select id="getDelivery" resultType="java.util.Map" parameterType="java.util.Map">
        select A.*
        from delivery_info A where 1=1
        <if test="giveaway_cd != null"> <![CDATA[AND A.giveaway_cd= #{giveaway_cd} ]]></if>
        <if test="order_user_id != null"> <![CDATA[AND A.order_user_id= #{order_user_id} ]]></if>
        <if test="product_cd != null"> <![CDATA[AND A.product_cd= #{product_cd} ]]></if>
        <if test="order_no != null"> <![CDATA[AND A.order_no= #{order_no} ]]></if>
        order by reg_date desc
        limit 1
    </select>
    <insert id="insertDelivery" parameterType="com.webapp.mall.vo.DeliveryInfoVO">
        insert into delivery_info(
        giveaway_play_cd,
        order_no,
        product_cd,
        giveaway_cd,
        order_user_id,
        order_user_name,
        order_user_email,
        order_user_phone,
        delivery_type,
        delivery_user_name,
        delivery_user_phone,
        delivery_user_tel,
        postcode,
        roadAddress,
        extraAddress,
        jibunAddress,
        delivery_message
        )values(
        #{giveaway_play_cd},
        #{order_no},
        #{product_cd},
        #{giveaway_cd},
        #{order_user_id},
        #{order_user_name},
        #{order_user_email},
        #{order_user_phone},
        #{delivery_type},
        #{delivery_user_name},
        #{delivery_user_phone},
        #{delivery_user_tel},
        #{postcode},
        #{roadAddress},
        #{extraAddress},
        #{jibunAddress},
        #{delivery_message}
        )
    </insert>

</mapper>
